<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Welcome</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: transparent;
            display: none;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Segoe UI', sans-serif;
        }
        .tablet {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border-radius: 30px;
            padding: 30px 30px 25px;
            box-shadow: 0 0 0 6px #0f3460, 0 0 40px rgba(0,200,255,0.15), 0 30px 60px rgba(0,0,0,0.6);
            position: relative;
            border: 1px solid rgba(255,255,255,0.05);
            max-width: 95vw;
        }
        .tablet::before {
            content: ''; display: block; width: 10px; height: 10px;
            background: #0f3460; border-radius: 50%; margin: 0 auto 18px;
            box-shadow: 0 0 6px rgba(0,200,255,0.4);
        }
        .tablet::after {
            content: ''; display: block; width: 40px; height: 40px;
            background: #0f3460; border-radius: 50%; margin: 20px auto 0;
            border: 2px solid rgba(255,255,255,0.1);
        }
        .tablet-screen {
            background: #0d1117; border-radius: 16px; padding: 28px 24px;
            border: 1px solid rgba(0,200,255,0.1);
        }
        h1 { text-align: center; color: #fff; font-size: 22px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 6px; }
        .subtitle { text-align: center; color: rgba(255,255,255,0.4); font-size: 13px; margin-bottom: 28px; letter-spacing: 1px; }
        .divider { width: 60px; height: 2px; background: linear-gradient(90deg, transparent, #00c8ff, transparent); margin: 0 auto 20px; border-radius: 2px; }
        .prizes-container { display: grid; gap: 16px; }
        .prizes-container.count-1 { grid-template-columns: repeat(1, 1fr); width: 260px; }
        .prizes-container.count-2 { grid-template-columns: repeat(2, 1fr); width: 520px; }
        .prizes-container.count-3 { grid-template-columns: repeat(3, 1fr); width: 760px; }
        .prizes-container.count-4 { grid-template-columns: repeat(2, 1fr); width: 520px; }
        .prizes-container.count-5 { grid-template-columns: repeat(3, 1fr); width: 760px; }
        .prizes-container.count-6 { grid-template-columns: repeat(3, 1fr); width: 760px; }
        .prize-card {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(0,200,255,0.15);
            border-radius: 16px; padding: 18px; display: flex; flex-direction: column;
            align-items: center; gap: 12px; transition: all 0.3s ease; overflow: hidden;
        }
        .prize-card:hover { border-color: rgba(0,200,255,0.5); background: rgba(0,200,255,0.05); transform: translateY(-4px); box-shadow: 0 10px 30px rgba(0,200,255,0.1); }
        .prize-image { width: 100%; height: 110px; border-radius: 10px; background: transparent; display: flex; align-items: center; justify-content: center; }
        .prize-image img { max-width: 100%; max-height: 100%; object-fit: contain; filter: drop-shadow(0 0 10px rgba(0,200,255,0.3)); }
        .prize-emoji { font-size: 52px; line-height: 1; }
        .prize-title { color: #fff; font-size: 15px; font-weight: 700; text-align: center; letter-spacing: 1px; }
        .prize-desc { color: rgba(255,255,255,0.5); font-size: 11px; text-align: center; line-height: 1.5; }
        .prize-badge { background: linear-gradient(135deg, #00c8ff22, #0066ff22); border: 1px solid rgba(0,200,255,0.3); color: #00c8ff; font-size: 12px; font-weight: 600; padding: 3px 12px; border-radius: 20px; letter-spacing: 1px; }
        .btn-choose { width: 100%; padding: 10px; background: linear-gradient(135deg, #00c8ff, #0066ff); color: #fff; border: none; border-radius: 10px; font-size: 12px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 4px 15px rgba(0,200,255,0.2); }
        .btn-choose:hover { transform: scale(1.03); box-shadow: 0 6px 20px rgba(0,200,255,0.4); }
        .btn-choose:active { transform: scale(0.98); }
        .btn-close { position: absolute; top: 14px; right: 18px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.5); width: 30px; height: 30px; border-radius: 50%; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .btn-close:hover { background: rgba(255,50,50,0.2); color: #ff5555; border-color: #ff5555; }
    </style>
</head>
<body>
<div class="tablet">
    <div class="tablet-screen">
        <button class="btn-close" onclick="closeUI()">&#x2715;</button>
        <h1 id="ui-title"></h1>
        <p class="subtitle" id="ui-subtitle"></p>
        <div class="divider"></div>
        <div class="prizes-container" id="prizes-container"></div>
    </div>
</div>
<script>
    window.addEventListener('message', function(event) {
        var data = event.data;
        if (data.action === 'openUI') {
            document.getElementById('ui-title').textContent    = data.title    || 'Bem-vindo!';
            document.getElementById('ui-subtitle').textContent = data.subtitle || 'Escolhe o teu pr√©mio';
            var container = document.getElementById('prizes-container');
            container.innerHTML = '';
            var count = data.prizes.length;
            container.className = 'prizes-container count-' + count;
            data.prizes.forEach(function(p) {
                var card = document.createElement('div');
                card.className = 'prize-card';
                card.innerHTML =
                    '<div class="prize-image">' +
                        '<img src="img/' + p.image + '" alt="' + p.label + '"/>' +
                    '</div>' +
                    '<div class="prize-title">' + p.label + '</div>' +
                    '<div class="prize-desc">'  + p.description + '</div>' +
                    '<div class="prize-badge">' + p.badge + '</div>' +
                    '<button class="btn-choose" onclick="choosePrize(' + p.index + ')">&#x2714; Escolher</button>';
                container.appendChild(card);
            });
            document.body.style.display = 'flex';
        } else if (data.action === 'closeUI') {
            document.body.style.display = 'none';
        }
    });
    function choosePrize(index) {
        fetch('https://qb-welcome/choosePrize', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ prize: index })
        });
    }
    function closeUI() {
        fetch('https://qb-welcome/closeUI', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({})
        });
    }
</script>
</body>
</html>